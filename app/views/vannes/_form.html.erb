<% modal = modal || false 
@vanne = @vanne || Vanne.new %>

<%= form_for(@vanne) do |f| %>
  <% if modal %><div class="modal-body"><% end %>
  
    <% if @vanne.errors.any? %>
      <div class="alert alert-error">
	<h4 class="alert-heading">Whoops !! Il y a quelques problèmes ...</h4>

	<ul>
	<% @vanne.errors.each do |field, msg| %>
	  <li><%= msg %></li>
	<% end %>
	</ul>
      </div>
    <% end %>
    
    <% if not (@current_membre && @current_membre.vannes.count > 5) %>
      <div class="alert alert-info">
	<strong>Tu débutes ?</strong>
	Avant de poster pour la première fois, prend le temps de <%= link_to 'lire quelques conseils', about_path %> pour écrire la meilleure vanne possible !
      </div>
    <% end %>

    <%= f.text_area :contenu, :rows => 5, :placeholder => "Entre ta vanne ici !!", :autofocus => "autofocus", :style => "width:90%" %>
  <% if modal %></div><% end %>
  
  <div class="action <%= 'modal-footer' if modal %>">
    <%= f.submit 'Poste ta vanne', :class => "btn btn-primary" %>
  </div>
<% end %>
