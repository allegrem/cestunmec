<% if params[:order] %>
<div id="main_frame">
  <% case params[:order]
    when 'best' %>
      <h2>Les meilleures</h2>
      <p>Découvre les meilleures vannes jamais postées depuis la création du site. Et si tu penses pouvoir faire mieux, <%= link_to 'postes-en une', new_vanne_path %> et peut-être qu'un jour toi aussi tu feras parti les grands ...</p>
    <% when 'buzz' %>
      <h2>Les buzzantes</h2>
      <p>Marre de toujours voir les mêmes meilleures vannes ? Ici découvre en exclusivité les vannes qui ont marqué la semaine. Et n'oublie pas qu'il n'est jamais trop tard pour <%= link_to 'poster la tienne', new_vanne_path %> !!</p>
    <% when 'validation' %>
      <h2>Validation</h2>
    <% end %>
</div>


<% else %>


<div id="new_vanne_scroll">
  
  <h2><%= link_to 'Envie de poster ta propre vanne ?', "#", :id => "new_vanne_scroll_trigger" %></h2>
  
  <div id="new_vanne_scroll_hidden">
    <%= render 'form' %>
  </div>
</div>

<script>
  var trigger_new = document.getElementById('new_vanne_scroll_trigger');
  var hidden_new = document.getElementById('new_vanne_scroll_hidden');

  trigger_new.addEventListener('click', function(e) {
      e.preventDefault();
      if (hidden_new.style.display == 'block') {
	hidden_new.style.display = 'none';
      }
      else {
	hidden_new.style.display = 'block';
      }
  }, false);
</script>

<% end %>


<% @vannes.each do |vanne| %>
  <%= render :partial => 'vanne', :locals => {:vanne => vanne} %>
<% end %>


<% if @vannes_count > (params[:page].to_i + 1) * 10 %>
<div id="plus_vannes_scroll">
  <strong><%= link_to 'Encore plus de vannes ...', vannes_path(:order => params[:order], :page => params[:page].to_i + 1), :remote => true %></strong>
</div>
<% end %>
